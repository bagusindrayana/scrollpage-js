class ScrollPage{constructor(parent,options=null){const _this=this;_this.element=parent,_this.options=options,_this.initEvents(),document.addEventListener("wheel",function(e){e.preventDefault(),_this.scrollListener(e)},{passive:options?.passive??!1}),_this.touchstartX=0,_this.touchstartY=0,_this.touchendX=0,_this.touchendY=0;const body=document.body;body.addEventListener("touchstart",function(event){e.preventDefault(),_this.touchstartX=event.changedTouches[0].screenX,_this.touchstartY=event.changedTouches[0].screenY},{passive:!1}),body.addEventListener("touchend",function(event){_this.scrollListener(event)},{passive:!0});parent=document.querySelector(this.element);_this.childs=[...parent.children],_this.stop=!0,options?.menu&&_this.setMenu(options?.menu),_this.pageSelectedClass=options?.pageSelectedClass??"active",_this.menuSelectedClass=options?.menuSelectedClass??"active",_this.currentPage=options?.currentPage??1,_this.currentTarget=_this.childs[_this.currentPage-1],options?.currentPage?_this.moveTo(_this.currentPage):window.pageYOffset<=1?(_this.currentPage=options?.currentPage??1,_this.currentTarget=_this.childs[0]):_this.childs.forEach(child=>{window.pageYOffset==child.offsetTop&&(_this.currentPage=_this.pageNumber(child),_this.currentTarget=child)})}initEvents(){this.scrollCallback=this.options?.scrollCallback??function(e){},this.moveCallback=this.options?.moveCallback??function(e){},this.startCallback=this.options?.startCallback??function(e){},this.finishCallback=this.options?.finishCallback??function(e){}}has(object,key){return!!object&&hasOwnProperty.call(object,key)}pageIndex(element){return this.childs.indexOf(element??this.currentTarget)}pageNumber(element){return this.pageIndex(element??this.currentTarget)+1}scrollListener(e){this.scrollCallback(this);const childs=this.childs;var next=e.target.nextElementSibling,prev=e.target.previousElementSibling;if(!this.stop)return!1;this.startCallback(this);const active=e.target.closest("."+this.pageSelectedClass);active&&active.classList.remove(this.pageSelectedClass);let up=!1;if(e.changedTouches.length&&(this.touchendX=e.changedTouches[0].screenX,this.touchendY=e.changedTouches[0].screenY,timeAnimation=this.touchendX-this.touchstartX,easingAnimation=this.touchendY-this.touchstartY,Math.abs(timeAnimation)<Math.abs(easingAnimation)&&(up=0<easingAnimation)),null!=e.deltaY&&null!=e.deltaY&&(e.deltaY<0?up=!0:0<e.deltaY&&(up=!1)),up){if(e.preventDefault(),childs.includes(prev)&&prev){this.stop=!1;var timeAnimation=this.pageNumber(prev);const optionsPage=this.has(this.options?.pages,timeAnimation)?this.options?.pages[timeAnimation]:null;optionsPage?.start&&optionsPage?.start();var easingAnimation=optionsPage?.animation??this.options?.animation,timeAnimation=optionsPage?.time??this.options?.time;prev.classList.add(this.pageSelectedClass),this.currentTarget=prev,this.verticalScroll(prev,timeAnimation,easingAnimation,optionsPage?.finish)}}else if(e.preventDefault(),childs.includes(next)&&next){this.stop=!1;const pn=this.pageNumber(next),optionsPage=this.has(this.options?.pages,pn)?this.options?.pages[pn]:null;optionsPage?.start&&optionsPage?.start();let easingAnimation=optionsPage?.animation??this.options?.animation,timeAnimation=optionsPage?.time??this.options?.time;next.classList.add(this.pageSelectedClass),this.currentTarget=next,this.verticalScroll(next,timeAnimation,easingAnimation,optionsPage?.finish)}}verticalScroll(destination){const _this=this;if(null==destination)return!1;const duration=arguments.length<=1||void 0===arguments[1]?500:arguments[1],easing=arguments.length<=2||null==arguments[2]?"easeInSine":arguments[2],callback=arguments[3];const easings={easeInSine(x){return 1-Math.cos(x*Math.PI/2)},easeOutSine(x){return Math.sin(x*Math.PI/2)},easeInOutSine(x){return-(Math.cos(Math.PI*x)-1)/2},easeInQuad:function(x){return 1-(1-x)*(1-x)},easeInOutQuad(x){return x<.5?2*x*x:1-Math.pow(-2*x+2,2)/2},easeInCubic(x){return x*x*x},easeOutCubic(x){return 1-Math.pow(1-x,3)},easeInOutCubic(x){return x<.5?4*x*x*x:1-Math.pow(-2*x+2,3)/2},easeInQuart(x){return x*x*x*x},easeOutQuart(x){return 1-Math.pow(1-x,4)},easeInOutQuart(x){return x<.5?8*x*x*x*x:1-Math.pow(-2*x+2,4)/2},easeInQuint(x){return x*x*x*x*x},easeOutQuint(x){return 1-Math.pow(1-x,5)},easeInOutQuint(x){return x<.5?16*x*x*x*x*x:1-Math.pow(-2*x+2,5)/2},easeInExpo(x){return 0===x?0:Math.pow(2,10*x-10)},easeOutExpo(x){return 1===x?1:1-Math.pow(2,-10*x)},easeInOutExpo(x){return 0===x?0:1===x?1:x<.5?Math.pow(2,20*x-10)/2:(2-Math.pow(2,-20*x+10))/2},easeInCirc(x){return 1-Math.sqrt(1-Math.pow(x,2))},easeOutCirc(x){return Math.sqrt(1-Math.pow(x-1,2))},easeInOutCirc(x){return x<.5?(1-Math.sqrt(1-Math.pow(2*x,2)))/2:(Math.sqrt(1-Math.pow(-2*x+2,2))+1)/2},easeInBack(x){return 2.70158*x*x*x-1.70158*x*x},easeOutBack(x){return 1+2.70158*Math.pow(x-1,3)+1.70158*Math.pow(x-1,2)},easeInOutBack(x){var c2=2.5949095;return x<.5?Math.pow(2*x,2)*(7.189819*x-c2)/2:(Math.pow(2*x-2,2)*((1+c2)*(2*x-2)+c2)+2)/2},easeInElastic(x){var c4=2*Math.PI/3;return 0===x?0:1===x?1:-Math.pow(2,10*x-10)*Math.sin((10*x-10.75)*c4)},easeOutElastic(x){var c4=2*Math.PI/3;return 0===x?0:1===x?1:Math.pow(2,-10*x)*Math.sin((10*x-.75)*c4)+1},easeInOutElastic(x){var c5=2*Math.PI/4.5;return 0===x?0:1===x?1:x<.5?-(Math.pow(2,20*x-10)*Math.sin((20*x-11.125)*c5))/2:Math.pow(2,-20*x+10)*Math.sin((20*x-11.125)*c5)/2+1},easeInBounce(x){return 1-easings.easeOutBounce(1-x)},easeOutBounce(x){var n1=7.5625,d1=2.75;return x<1/d1?n1*x*x:x<2/d1?n1*(x-=1.5/d1)*x+.75:x<2.5/d1?n1*(x-=2.25/d1)*x+.9375:n1*(x-=2.625/d1)*x+.984375},easeInOutBounce(x){return x<.5?(1-easings.easeOutBounce(1-2*x))/2:(1+easings.easeOutBounce(2*x-1))/2}};var start=window.pageYOffset,startTime="now"in window.performance?performance.now():(new Date).getTime(),documentHeight=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),windowHeight=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,destinationOffset="number"==typeof destination?destination:destination.offsetTop,destinationOffsetToScroll=documentHeight-destinationOffset<windowHeight?documentHeight-windowHeight:destinationOffset;if("requestAnimationFrame"in window==!1)return window.scroll(0,destinationOffsetToScroll),callback&&callback(),void(_this.stop=!0);!function scroll(){var timeFunction="now"in window.performance?performance.now():(new Date).getTime(),timeFunction=Math.min(1,(timeFunction-startTime)/duration),timeFunction=easings[easing](timeFunction);if(window.scroll(0,Math.ceil(timeFunction*(destinationOffsetToScroll-start)+start)),window.pageYOffset===destinationOffsetToScroll||1==("easeInSine"==easing&&window.pageYOffset-destinationOffsetToScroll))return callback&&callback(),_this.stop=!0,_this.currentPage=_this.pageNumber(),void _this.finishCallback(_this);_this.moveCallback(_this),requestAnimationFrame(scroll)}()}onScroll(callback){this.scrollCallback=callback}onMove(callback){this.moveCallback=callback}onStart(callback){this.startCallback=callback}onFinish(callback){this.finishCallback=callback}moveTo(page,options=null){let target=null,i=0;target="number"==typeof page?(i=page-1,this.childs[i]):"string"==typeof page?(i=this.findPageByNode(document.querySelector(page)),this.childs[i]):-1!==this.findPageByNode(page)?(i=this.findPageByNode(page),this.childs[i]):document.querySelector(page),null==options&&(options=this.has(this.options?.pages,i+1)&&this.options?.pages[i+1]?this.options?.pages[i+1]:this.options),target?(options?.start&&options?.start(),this.currentTarget=target,this.verticalScroll(target,options?.time,options?.animation,options?.finish)):console.e("page not found")}setMenu(menuSelector){const _this=this,menu=document.querySelector(menuSelector);if(menu){const menuItems=[...menu.children];menuItems.forEach(item=>{item.addEventListener("click",e=>{e.preventDefault();const actives=menu.querySelectorAll("."+_this.menuSelectedClass);0<actives.length&&actives.forEach(active=>{active.classList.remove(_this.menuSelectedClass)}),_this.moveTo(item.getAttribute("data-page")),e.target.classList.add(_this.menuSelectedClass)})})}}findPageByNode(node){return this.childs.indexOf(node)}}